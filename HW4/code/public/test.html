<!doctype html>
<html>
<head><meta charset="utf-8"><title>API Test</title></head>
<body>
<h3>API quick tester</h3>
<button onclick="register()">Register</button>
<button onclick="login()">Login</button>
<button onclick="list()">List items</button>
<button onclick="create()">Create item</button>

<script>
async function register(){
  const res = await fetch('/api/auth/register', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({name:'TestUser', email:'test@example.com', password:'secret123'})
  });
  console.log(await res.json());
}
async function login(){
  const res = await fetch('/api/auth/login', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({email:'test@example.com', password:'secret123'})
  });
  const j = await res.json();
  localStorage.setItem('token', j.access_token);
  console.log(j);
}
async function list(){
  const res = await fetch('/api/items');
  console.log(await res.json());
}
async function create(){
  const token = localStorage.getItem('token');
  const res = await fetch('/api/items', {
    method:'POST',
    headers:{
      'Content-Type':'application/json',
      'Authorization':'Bearer ' + token
    },
    body: JSON.stringify({title: 'New Item', description: 'desc'})
  });
  console.log(await res.json());
}
</script>
</body>
</html>
